{% extends "base.html" %}

{% block title %}Server Auswahl - TRS Tickets{% endblock %}

{% block content %}
<main style="padding: 3rem 0;">
    <h1><i class="fas fa-server"></i> Server Auswahl</h1>
    <p style="opacity: 0.7;">W√§hle einen Server aus, um fortzufahren</p>

    {% if servers and servers|length > 0 %}
        <form method="POST" action="/select-server" style="margin-top: 3rem;">
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                {% for server in servers %}
                    <label style="border: 2px solid var(--border-color); border-radius: 10px; padding: 2rem; cursor: pointer; transition: all 0.2s; {% if currentGuild == server.id %}border-color: var(--accent-color); background: var(--card-bg);{% endif %}">
                        <input type="radio" name="guildId" value="{{ server.id }}" {% if currentGuild == server.id %}checked{% endif %} required style="display: none;">
                        <div style="display: flex; align-items: center; gap: 1rem;">
                            <div style="width: 48px; height: 48px; border-radius: 50%; background: var(--card-bg); display: flex; align-items: center; justify-content: center;">
                                {% if server.icon %}
                                    <img src="{{ server.icon }}" alt="{{ server.name }}" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                                {% else %}
                                    üõ°Ô∏è
                                {% endif %}
                            </div>
                            <div>
                                <div style="font-weight: 600; font-size: 1.1rem;">
                                    {{ server.name }}
                                    {% if currentGuild == server.id %}
                                        <span style="background: var(--accent-color); color: #000; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.7rem; margin-left: 0.5rem;">Aktuell</span>
                                    {% endif %}
                                </div>
                                <div style="font-size: 0.75rem; opacity: 0.6; font-family: monospace;">{{ server.id }}</div>
                            </div>
                        </div>
                    </label>
                {% endfor %}
            </div>

            <button type="submit" style="margin-top: 2rem;">‚úÖ Server ausw√§hlen</button>
        </form>
    {% else %}
        <div style="text-align: center; padding: 3rem; opacity: 0.6;">
            <p>‚ö†Ô∏è Keine Server verf√ºgbar</p>
            <p style="margin-top: 1rem; font-size: 0.85rem;">
                Du bist auf keinem Server Administrator wo der Bot ist.
            </p>
        </div>
    {% endif %}

    <footer style="text-align: center; margin-top: 3rem; opacity: 0.6;">
        <p>TRS Tickets ¬©Ô∏è ‚Ä¢ Version {{ version }}</p>
    </footer>
</main>
{% endblock %}
