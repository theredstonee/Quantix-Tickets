<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <title>Ticketâ€‘Bot Panel</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
</head>
<body class="container">
  <h1>ðŸŽ« Ticketâ€‘Kategorien</h1>

  <!-- Kategorien als Tabelle editierbar -->
  <form method="POST">
    <table>
      <thead><tr><th>Label</th><th>Value</th><th>Emoji</th></tr></thead>
      <tbody id="rows">
        <% cfg.topics.forEach(t => { %>
        <tr>
          <td><input name="label" value="<%= t.label %>" required></td>
          <td><input name="value" value="<%= t.value %>"></td>
          <td><input name="emoji" value="<%= t.emoji %>"></td>
        </tr>
        <% }) %>
      </tbody>
    </table>

    <button type="button" onclick="addRow()">âž• Neue Zeile</button>
    <button type="submit">ðŸ’¾ Speichern</button>
  </form>

  <!-- Panelâ€‘Nachricht steuern -->
  <h2>Panelâ€‘Nachricht</h2>
  <form action="/panel/send" method="POST" style="margin-bottom:1rem">
    <input name="channelId" placeholder="Channelâ€‘ID" value="<%= cfg.panelChannelId || '' %>" required>
    <button>ðŸ“¨ Senden</button>
  </form>

  <form action="/panel/edit" method="POST">
    <button>ðŸ”„ Bearbeiten&nbsp;(bestehende Panelâ€‘Nachricht)</button>
  </form>

  <h2>Ticket Embed Vorlage</h2>
  <p>Platzhalter: {userMention} {topicLabel} {ticketNumber} {userId} {topicValue}</p>

  <label>Titel
    <input name="embedTitle" value="<%= (cfg.ticketEmbed && cfg.ticketEmbed.title) || '' %>">
  </label>

  <label>Beschreibung
    <textarea name="embedDescription" rows="4"><%= (cfg.ticketEmbed && cfg.ticketEmbed.description) || '' %></textarea>
  </label>

  <label>Farbe (Hex)
    <input name="embedColor" value="<%= (cfg.ticketEmbed && cfg.ticketEmbed.color) || '#2b90d9' %>" placeholder="#2b90d9">
  </label>

  <label>Footer
    <input name="embedFooter" value="<%= (cfg.ticketEmbed && cfg.ticketEmbed.footer) || '' %>">
  </label>

<h3>Themen (JSON)</h3>
<textarea name="topicsJson" rows="6"><%= JSON.stringify(cfg.topics || [], null, 2) %></textarea>

<h3>Formularfelder (JSON)</h3>
<textarea name="formFieldsJson" rows="6"><%= JSON.stringify(cfg.formFields || [], null, 2) %></textarea>

<button type="submit">ðŸ’¾ Speichern</button>


  <script>
    function addRow () {
      const r = document.createElement('tr');
      r.innerHTML = `
        <td><input name="label" required></td>
        <td><input name="value"></td>
        <td><input name="emoji"></td>`;
      document.getElementById('rows').appendChild(r);
    }
  </script>
</body>
</html>
