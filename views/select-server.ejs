<!doctype html>
<html lang="de">
<head>
  <!-- Theme Manager - Load before anything else -->
  <script src="/js/theme-manager.js"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SLMX16ZJ6Y"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-SLMX16ZJ6Y');
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <title>Server Auswahl - Quantix Tickets</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
  <link rel="shortcut icon" href="/images/favicon.png">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="stylesheet" href="/markdown.css">
  <style>
    :root {
      --bg-color: #f0f8ff;
      --text-color: #1a1a2e;
      --border-color: #bdd7ee;
      --accent-color: #0ea5e9;
      --accent-hover: #0284c7;
      --card-bg: rgba(255, 255, 255, 0.9);
      --card-hover-shadow: rgba(14, 165, 233, 0.15);
      --icon-bg: #bdd7ee;
      --badge-bg: #0ea5e9;
      --glass-bg: rgba(240, 248, 255, 0.7);
      --glass-border: rgba(14, 165, 233, 0.3);
      --shadow-color: rgba(14, 165, 233, 0.15);
    }

    [data-theme="dark"] {
      --bg-color: #0a0a0a;
      --text-color: #00ff88;
      --border-color: #1a3a2a;
      --accent-color: #00ff88;
      --accent-hover: #00dd77;
      --card-bg: #0f1510;
      --card-hover-shadow: rgba(0,255,136,0.2);
      --icon-bg: #1a3a2a;
      --badge-bg: #00ff88;
      --glass-bg: rgba(15, 21, 16, 0.7);
      --glass-border: rgba(0, 255, 136, 0.3);
      --shadow-color: rgba(0, 255, 136, 0.2);
    }

    [data-theme="dark"] body {
      background-color: var(--bg-color);
      color: var(--text-color);
    }

    [data-theme="dark"] .server-card {
      background: var(--card-bg);
      border-color: var(--border-color);
    }

    [data-theme="dark"] .server-card:hover {
      border-color: var(--accent-color);
      box-shadow: 0 4px 12px var(--card-hover-shadow);
    }

    [data-theme="dark"] .server-card.selected {
      border-color: var(--accent-color);
      background: var(--card-bg);
    }

    [data-theme="dark"] .server-icon {
      background: var(--icon-bg);
    }

    [data-theme="dark"] .current-badge {
      background: var(--badge-bg);
      color: #000;
    }

    [data-theme="dark"] button:not(.theme-toggle) {
      background: var(--accent-color);
      color: #000;
    }

    /* Animated Background */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      background: radial-gradient(circle, var(--accent-color) 1px, transparent 1px);
      background-size: 50px 50px;
      opacity: 0.03;
      animation: bgMove 20s linear infinite;
    }

    @keyframes bgMove {
      0% { transform: translate(0, 0); }
      100% { transform: translate(50px, 50px); }
    }

    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      width: 100%;
      max-width: 100%;
      padding: 0 2rem;
      line-height: 1.8;
      margin: 0;
    }

    main {
      width: 100%;
      margin: 0;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      body {
        padding: 0 1rem;
      }

      h1 { font-size: 1.8rem; }

      .sub {
        font-size: 0.85rem !important;
      }

      .server-grid {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
      }

      .server-card {
        padding: 1.5rem !important;
      }

      .server-icon {
        width: 48px !important;
        height: 48px !important;
        min-width: 48px !important;
        min-height: 48px !important;
        flex-shrink: 0 !important;
      }

      .server-name {
        font-size: 1rem !important;
        flex-wrap: wrap;
      }

      .current-badge {
        font-size: 0.65rem !important;
        padding: 0.15rem 0.4rem !important;
        margin-left: 0 !important;
        margin-top: 0.3rem;
      }

      .server-id {
        font-size: 0.7rem !important;
      }

      .submit-btn {
        width: 100% !important;
      }

      .theme-toggle {
        top: 0.5rem !important;
        right: 0.5rem !important;
        width: 2.5rem !important;
        height: 2.5rem !important;
        font-size: 1.2rem !important;
      }

      .settings-toggle {
        top: 0.5rem !important;
        right: 3.5rem !important;
        width: 2.5rem !important;
        height: 2.5rem !important;
        font-size: 1.2rem !important;
      }

      .no-servers {
        padding: 2rem !important;
        font-size: 0.9rem;
      }
    }

    /* Tablet Responsive */
    @media (min-width: 769px) and (max-width: 1024px) {
      body {
        padding: 0 2rem;
      }

      .server-grid {
        grid-template-columns: repeat(2, 1fr) !important;
      }
    }

    main {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    h1 { display: flex; align-items: center; gap: 0.8rem; margin-bottom: 0.5rem; margin-top: 2rem; }
    .sub { font-size: 0.9rem; opacity: 0.7; margin: 0 0 3rem; }
    .server-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 3rem; }
    .server-card {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 2px solid var(--glass-border);
      border-radius: 12px;
      padding: 2rem;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      box-shadow: 0 8px 32px var(--shadow-color);
    }
    .server-card:hover {
      border-color: var(--accent-color);
      box-shadow: 0 12px 40px var(--shadow-color);
      transform: translateY(-4px);
    }
    .server-card.selected {
      border-color: var(--accent-color);
      background: var(--glass-bg);
      box-shadow: 0 12px 40px var(--shadow-color);
    }
    .server-card.no-bot {
      opacity: 0.4;
      filter: grayscale(100%);
      cursor: pointer;
    }
    .server-card.no-bot:hover {
      opacity: 0.6;
      border-color: #ff4444;
      transform: translateY(-2px);
    }
    .server-card input[type="radio"] { position: absolute; opacity: 0; }
    .server-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 0.5rem; overflow: visible; width: 100%; }
    .server-header > div:last-child { flex: 1; min-width: 0; overflow: hidden; }
    .server-icon { width: 48px; height: 48px; min-width: 48px; min-height: 48px; border-radius: 50%; background: #e5e8ec; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; flex-shrink: 0; overflow: hidden; }
    .server-icon img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; display: block; }
    .server-name { font-weight: 600; font-size: 1.1rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 100%; }
    .server-id { font-size: 0.75rem; opacity: 0.6; font-family: monospace; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 100%; }
    .current-badge { display: inline-block; background: #00ff00; color: #000; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600; margin-left: 0.5rem; }
    .no-servers { text-align: center; padding: 3rem; opacity: 0.6; }

    /* No Servers Hero Section */
    .no-servers-hero {
      text-align: center;
      max-width: 800px;
      margin: 0 auto;
      padding: 3rem 2rem;
    }

    .no-servers-icon {
      font-size: 6rem;
      margin-bottom: 2rem;
      background: linear-gradient(135deg, var(--accent-color), var(--accent-hover));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .no-servers-title {
      font-size: 2.5rem;
      color: var(--accent-color);
      margin-bottom: 1rem;
      font-weight: 700;
    }

    .no-servers-desc {
      font-size: 1.1rem;
      opacity: 0.8;
      margin-bottom: 3rem;
      line-height: 1.6;
    }

    .no-servers-actions {
      display: flex;
      gap: 1rem;
      justify-content: center;
      margin-bottom: 4rem;
      flex-wrap: wrap;
    }

    .btn-invite {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 2.5rem;
      background: linear-gradient(135deg, var(--accent-color), var(--accent-hover));
      color: #000;
      text-decoration: none;
      border-radius: 0.75rem;
      font-size: 1.1rem;
      font-weight: 700;
      box-shadow: 0 8px 32px var(--shadow-color);
      transition: all 0.3s;
    }

    .btn-invite:hover {
      transform: translateY(-3px);
      box-shadow: 0 12px 40px var(--shadow-color);
    }

    .btn-secondary {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 2.5rem;
      background: transparent;
      border: 2px solid var(--glass-border);
      color: var(--text-color);
      text-decoration: none;
      border-radius: 0.75rem;
      font-size: 1.1rem;
      font-weight: 600;
      transition: all 0.3s;
    }

    .btn-secondary:hover {
      background: var(--glass-bg);
      border-color: var(--accent-color);
      transform: translateY(-3px);
    }

    .no-servers-steps {
      background: var(--glass-bg);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 2px solid var(--glass-border);
      border-radius: 1rem;
      padding: 2rem;
      text-align: left;
      box-shadow: 0 8px 32px var(--shadow-color);
    }

    .no-servers-steps h3 {
      color: var(--accent-color);
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .steps-list {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .step-item {
      display: flex;
      gap: 1.5rem;
      align-items: flex-start;
    }

    .step-num {
      width: 40px;
      height: 40px;
      min-width: 40px;
      background: var(--accent-color);
      color: #000;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.25rem;
    }

    .step-content {
      flex: 1;
    }

    .step-content strong {
      display: block;
      color: var(--accent-color);
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
    }

    .step-content p {
      opacity: 0.8;
      line-height: 1.6;
      margin: 0;
    }

    @media (max-width: 768px) {
      .no-servers-hero {
        padding: 2rem 1rem;
      }

      .no-servers-icon {
        font-size: 4rem;
      }

      .no-servers-title {
        font-size: 1.75rem;
      }

      .no-servers-desc {
        font-size: 1rem;
      }

      .no-servers-actions {
        flex-direction: column;
      }

      .btn-invite,
      .btn-secondary {
        width: 100%;
        justify-content: center;
      }

      .no-servers-steps {
        padding: 1.5rem;
      }

      .step-item {
        gap: 1rem;
      }

      .step-num {
        width: 32px;
        height: 32px;
        min-width: 32px;
        font-size: 1rem;
      }

      .step-content strong {
        font-size: 1rem;
      }

      .step-content p {
        font-size: 0.9rem;
      }
    }
    .submit-btn { margin-top: 1rem; }
    footer { margin-top: 3rem; margin-bottom: 3rem; padding-bottom: 2rem; text-align: center; font-size: 0.75rem; opacity: 0.6; }

    [data-theme="dark"] footer {
      margin-bottom: 4rem;
      padding-bottom: 3rem;
    }

    /* Loading Overlay */
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.95);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      flex-direction: column;
      gap: 2rem;
    }

    .loading-overlay.show {
      display: flex;
    }

    .loading-content {
      text-align: center;
      background: rgba(255,255,255,0.05);
      padding: 3rem;
      border-radius: 20px;
      border: 1px solid rgba(0,255,136,0.2);
      max-width: 400px;
      width: 90%;
    }

    .loading-spinner {
      width: 60px;
      height: 60px;
      border: 6px solid rgba(0,255,136,100);
      border-top: 6px solid var(--accent-color);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 2rem;
    }

    .loading-text {
      font-size: 1.3rem;
      color: var(--accent-color);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .loading-subtext {
      font-size: 0.9rem;
      opacity: 0.7;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .theme-toggle {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      background: var(--accent-color);
      color: #000;
      border: 0;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 1000;
    }

    .theme-toggle:hover {
      transform: scale(1.1);
      background: var(--accent-hover);
    }

    [data-theme="dark"] .theme-toggle {
      background: var(--accent-color);
      box-shadow: 0 2px 12px rgba(0,255,136,0.4);
    }

    .settings-toggle {
      position: fixed;
      top: 1.5rem;
      right: 5rem;
      background: var(--accent-color);
      color: #000;
      border: 0;
      width: 3rem;
      height: 3rem;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      z-index: 1000;
    }

    .settings-toggle:hover {
      transform: scale(1.1);
      background: var(--accent-hover);
    }

    .settings-toggle.active {
      animation: spinButton 2s linear infinite;
    }

    [data-theme="dark"] .settings-toggle {
      background: var(--accent-color);
      box-shadow: 0 2px 12px rgba(0,255,136,0.4);
    }

    @keyframes spinButton {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes spinPage {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    body.spinning {
      animation: spinPage 3s linear infinite;
      transform-origin: center center;
      overflow: hidden;
    }

    .nav-buttons {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }

    .nav-buttons a {
      padding: 0.6rem 1.2rem;
      background: var(--accent-color);
      color: #000;
      text-decoration: none;
      border-radius: 6px;
      font-size: 0.9rem;
      font-weight: 600;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      border: 2px solid transparent;
    }

    .nav-buttons a:hover {
      background: var(--accent-hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,184,148,0.3);
    }

    [data-theme="dark"] .nav-buttons a {
      background: var(--accent-color);
      color: #000;
    }

    [data-theme="dark"] .nav-buttons a:hover {
      background: var(--accent-hover);
      box-shadow: 0 4px 12px rgba(0,255,136,0.4);
    }

    .owner-dashboard-btn.loading {
      pointer-events: none;
      opacity: 0.7;
    }

    .owner-dashboard-btn.loading i {
      animation: spin 1s linear infinite;
    }

    .founder-dashboard-btn.loading {
      pointer-events: none;
      opacity: 0.7;
    }

    .founder-dashboard-btn.loading i {
      animation: spin 1s linear infinite;
    }

    @media (max-width: 768px) {
      .nav-buttons {
        flex-direction: column;
      }

      .nav-buttons a {
        width: 100%;
        justify-content: center;
      }
    }
    .settings-toggle .click-count {
      position: absolute;
      bottom: -2px;
      right: -2px;
      background: linear-gradient(135deg, #f1c40f 0%, #f39c12 100%);
      color: #000;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
      font-weight: 700;
      border: 2px solid #0a0a0a;
      box-shadow: 0 2px 6px rgba(241, 196, 15, 0.6);
      pointer-events: none;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    @keyframes clickPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3) rotate(15deg); }
    }

    .settings-toggle .click-count.animate {
      animation: clickPulse 0.5s ease;
    }
  </style>
</head>
<body>
  <button class="settings-toggle" onclick="toggleSpin()" title="Einstellungen" id="settingsBtn">
    <i class="fas fa-cog"></i>
    <span class="click-count" id="clickCount">0</span>
  </button>
  <button class="theme-toggle" id="themeToggle" title="Dark/Light Mode umschalten">
    <i class="fas fa-moon"></i>
  </button>
  <h1><i class="fas fa-server"></i> <%= t.web.server_selection %></h1>
  <p class="sub"><%= t.web.select_server %></p>

  <div class="nav-buttons">
    <a href="/">
      <i class="fas fa-home"></i> <%= lang === 'de' ? 'Zur Startseite' : lang === 'en' ? 'Back to Home' : lang === 'he' ? '×—×–×¨×” ×œ×“×£ ×”×‘×™×ª' : lang === 'ja' ? 'ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹' : lang === 'ru' ? 'ĞĞ° Ğ³Ğ»Ğ°Ğ²Ğ½ÑƒÑ' : lang === 'pt' ? 'Voltar ao InÃ­cio' : lang === 'es' ? 'Volver al Inicio' : lang === 'id' ? 'Kembali ke Beranda' : lang === 'zh' ? 'è¿”å›é¦–é¡µ' : lang === 'ar' ? 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©' : 'Zur Startseite' %>
    </a>
    <a href="/my-tickets" id="myTicketsBtn" style="background: linear-gradient(135deg, #00ff88 0%, #00dd77 100%); color: #000; box-shadow: 0 4px 12px rgba(0,255,136,0.3);">
      <i class="fas fa-ticket-alt"></i> <%= lang === 'de' ? 'Meine Tickets' : lang === 'en' ? 'My Tickets' : lang === 'he' ? '×”×›×¨×˜×™×¡×™× ×©×œ×™' : lang === 'ja' ? 'ãƒã‚¤ãƒã‚±ãƒƒãƒˆ' : lang === 'ru' ? 'ĞœĞ¾Ğ¸ Ñ‚Ğ¸ĞºĞµÑ‚Ñ‹' : lang === 'pt' ? 'Meus Tickets' : lang === 'es' ? 'Mis Tickets' : lang === 'id' ? 'Tiket Saya' : lang === 'zh' ? 'æˆ‘çš„å·¥å•' : lang === 'ar' ? 'ØªØ°Ø§ÙƒØ±ÙŠ' : 'Meine Tickets' %>
    </a>
    <a href="https://discord.com/invite/mnYbnpyyBS" target="_blank" style="background: #5865F2; color: white;">
      <i class="fab fa-discord"></i> <%= lang === 'de' ? 'Support Server' : lang === 'en' ? 'Support Server' : lang === 'he' ? '×©×¨×ª ×ª××™×›×”' : lang === 'ja' ? 'ã‚µãƒãƒ¼ãƒˆã‚µãƒ¼ãƒãƒ¼' : lang === 'ru' ? 'Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¸' : lang === 'pt' ? 'Servidor de Suporte' : lang === 'es' ? 'Servidor de Soporte' : lang === 'id' ? 'Server Dukungan' : lang === 'zh' ? 'æ”¯æŒæœåŠ¡å™¨' : lang === 'ar' ? 'Ø®Ø§Ø¯Ù… Ø§Ù„Ø¯Ø¹Ù…' : 'Support Server' %>
    </a>
    <% if (user && (user.id === '928901974106202113' || user.id === '1159182333316968530' || user.id === '1415387837359984740' || user.id === '1048900200497954868')) { %>
      <a href="/owner" id="ownerDashboardBtn" class="owner-dashboard-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); box-shadow: 0 4px 12px rgba(102,126,234,0.4);">
        <i class="fas fa-crown"></i> <%= lang === 'de' ? 'Owner Dashboard' : lang === 'en' ? 'Owner Dashboard' : lang === 'he' ? '×œ×•×— ×‘×§×¨×ª ×”×‘×¢×œ×™×' : lang === 'ja' ? 'ã‚ªãƒ¼ãƒŠãƒ¼ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰' : lang === 'ru' ? 'ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ²Ğ»Ğ°Ğ´ĞµĞ»ÑŒÑ†Ğ°' : lang === 'pt' ? 'Painel do ProprietÃ¡rio' : lang === 'es' ? 'Panel del Propietario' : lang === 'id' ? 'Panel Pemilik' : lang === 'zh' ? 'æ‰€æœ‰è€…ä»ªè¡¨æ¿' : lang === 'ar' ? 'Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø§Ù„Ùƒ' : 'Owner Dashboard' %>
      </a>
    <% } %>
    <% if (user && (user.id === '1048900200497954868' || user.id === '1159182333316968530')) { %>
      <a href="/founder" id="founderDashboardBtn" class="founder-dashboard-btn" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); box-shadow: 0 4px 12px rgba(240,147,251,0.4);">
        <i class="fas fa-user-shield"></i> <%= lang === 'de' ? 'Founder Panel' : lang === 'en' ? 'Founder Panel' : lang === 'he' ? '×œ×•×— ××™×™×¡×“×™×' : lang === 'ja' ? 'å‰µè¨­è€…ãƒ‘ãƒãƒ«' : lang === 'ru' ? 'ĞŸĞ°Ğ½ĞµĞ»ÑŒ Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ' : lang === 'pt' ? 'Painel de Fundador' : lang === 'es' ? 'Panel de Fundador' : lang === 'id' ? 'Panel Pendiri' : lang === 'zh' ? 'åˆ›å§‹äººé¢æ¿' : lang === 'ar' ? 'Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¤Ø³Ø³' : 'Founder Panel' %>
      </a>
    <% } %>
  </div>

  <% if (servers && servers.length > 0) { %>
    <form method="POST" action="/select-server" id="serverForm">
      <div class="server-grid">
        <% servers.forEach(server => { %>
          <label class="server-card <%= currentGuild === server.id ? 'selected' : '' %> <%= !server.hasBot ? 'no-bot' : '' %>" data-has-bot="<%= server.hasBot ? 'true' : 'false' %>" data-server-id="<%= server.id %>">
            <input type="radio" name="guildId" value="<%= server.id %>" <%= currentGuild === server.id ? 'checked' : '' %> <%= !server.hasBot ? 'disabled' : '' %> required>
            <div class="server-header">
              <div class="server-icon">
                <% if (server.icon) { %>
                  <img src="<%= server.icon %>" alt="<%= server.name %>">
                <% } else { %>
                  ğŸ›¡ï¸
                <% } %>
              </div>
              <div>
                <div class="server-name">
                  <%= server.name %>
                  <% if (currentGuild === server.id) { %>
                    <span class="current-badge"><%= t.web.current %></span>
                  <% } %>
                  <% if (!server.hasBot) { %>
                    <span class="current-badge" style="background: #ff4444; color: #fff;">Bot fehlt</span>
                  <% } %>
                </div>
                <div class="server-id"><%= server.id %></div>
              </div>
            </div>
          </label>
        <% }); %>
      </div>

    </form>
  <% } else { %>
    <div class="no-servers-hero">
      <div class="no-servers-icon">
        <i class="fab fa-discord"></i>
      </div>
      <h2 class="no-servers-title"><%
        const noServerTitles = {
          de: 'Bot noch nicht auf deinem Server?',
          en: 'Bot not on your server yet?',
          he: '×”×‘×•×˜ ×¢×“×™×™×Ÿ ×œ× ×‘×©×¨×ª ×©×œ×š?',
          ja: 'ãƒœãƒƒãƒˆã¯ã¾ã ã‚µãƒ¼ãƒãƒ¼ã«ã„ã¾ã›ã‚“ã‹ï¼Ÿ',
          ru: 'Ğ‘Ğ¾Ñ‚ ĞµÑ‰Ğµ Ğ½Ğµ Ğ½Ğ° Ğ²Ğ°ÑˆĞµĞ¼ ÑĞµÑ€Ğ²ĞµÑ€Ğµ?',
          pt: 'Bot ainda nÃ£o estÃ¡ no seu servidor?',
          es: 'Â¿Bot aÃºn no estÃ¡ en tu servidor?',
          id: 'Bot belum ada di server Anda?',
          ar: 'Ø§Ù„Ø¨ÙˆØª Ù„ÙŠØ³ Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¨Ø¹Ø¯ØŸ'
        };
      %><%= noServerTitles[lang] || noServerTitles.de %></h2>
      <p class="no-servers-desc"><%
        const noServerDescs = {
          de: 'Du benÃ¶tigst Administrator-Rechte auf einem Server, auf dem der Bot installiert ist, oder eine Team-Rolle.',
          en: 'You need administrator permissions on a server where the bot is installed, or a team role.',
          he: '××ª×” ×¦×¨×™×š ×”×¨×©××•×ª ×× ×”×œ ×‘×©×¨×ª ×©×‘×• ×”×‘×•×˜ ××•×ª×§×Ÿ, ××• ×ª×¤×§×™×“ ×¦×•×•×ª.',
          ja: 'ãƒœãƒƒãƒˆãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‚µãƒ¼ãƒãƒ¼ã®ç®¡ç†è€…æ¨©é™ã€ã¾ãŸã¯ãƒãƒ¼ãƒ å½¹è·ãŒå¿…è¦ã§ã™ã€‚',
          ru: 'Ğ’Ğ°Ğ¼ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ° Ğ½Ğ° ÑĞµÑ€Ğ²ĞµÑ€Ğµ, Ğ³Ğ´Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ Ğ±Ğ¾Ñ‚, Ğ¸Ğ»Ğ¸ Ñ€Ğ¾Ğ»ÑŒ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹.',
          pt: 'VocÃª precisa de permissÃµes de administrador em um servidor onde o bot estÃ¡ instalado, ou uma funÃ§Ã£o de equipe.',
          es: 'Necesitas permisos de administrador en un servidor donde el bot estÃ© instalado, o un rol de equipo.',
          id: 'Anda memerlukan izin administrator di server tempat bot diinstal, atau peran tim.',
          ar: 'ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ø¹Ù„Ù‰ Ø®Ø§Ø¯Ù… Ø­ÙŠØ« ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¨ÙˆØªØŒ Ø£Ùˆ Ø¯ÙˆØ± ÙØ±ÙŠÙ‚.'
        };
      %><%= noServerDescs[lang] || noServerDescs.de %></p>

      <div class="no-servers-actions">
        <a href="<%= inviteUrl %>" class="btn-invite" target="_blank">
          <i class="fab fa-discord"></i>
          <%
            const inviteBtnTexts = {
              de: 'Bot zu Discord hinzufÃ¼gen',
              en: 'Add Bot to Discord',
              he: '×”×•×¡×£ ×‘×•×˜ ×œ-Discord',
              ja: 'ãƒœãƒƒãƒˆã‚’Discordã«è¿½åŠ ',
              ru: 'Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ° Ğ² Discord',
              pt: 'Adicionar Bot ao Discord',
              es: 'Agregar Bot a Discord',
              id: 'Tambahkan Bot ke Discord',
              ar: 'Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø¨ÙˆØª Ø¥Ù„Ù‰ Discord'
            };
          %><%= inviteBtnTexts[lang] || inviteBtnTexts.de %>
        </a>
        <a href="/" class="btn-secondary">
          <i class="fas fa-home"></i>
          <%
            const homeBtnTexts = {
              de: 'ZurÃ¼ck zur Startseite',
              en: 'Back to Home',
              he: '×—×–×¨×” ×œ×“×£ ×”×‘×™×ª',
              ja: 'ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹',
              ru: 'ĞĞ° Ğ³Ğ»Ğ°Ğ²Ğ½ÑƒÑ',
              pt: 'Voltar ao InÃ­cio',
              es: 'Volver al Inicio',
              id: 'Kembali ke Beranda',
              ar: 'Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©'
            };
          %><%= homeBtnTexts[lang] || homeBtnTexts.de %>
        </a>
      </div>

      <div class="no-servers-steps">
        <h3><%
          const stepsTitle = {
            de: 'So geht\'s weiter:',
            en: 'Next Steps:',
            he: '×©×œ×‘×™× ×”×‘××™×:',
            ja: 'æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ï¼š',
            ru: 'Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğµ ÑˆĞ°Ğ³Ğ¸:',
            pt: 'PrÃ³ximos Passos:',
            es: 'PrÃ³ximos Pasos:',
            id: 'Langkah Selanjutnya:',
            ar: 'Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:'
          };
        %><%= stepsTitle[lang] || stepsTitle.de %></h3>
        <div class="steps-list">
          <div class="step-item">
            <div class="step-num">1</div>
            <div class="step-content">
              <strong><%
                const step1Title = {
                  de: 'Bot einladen',
                  en: 'Invite Bot',
                  he: '×”×–××Ÿ ×‘×•×˜',
                  ja: 'ãƒœãƒƒãƒˆã‚’æ‹›å¾…',
                  ru: 'ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑĞ¸Ñ‚ÑŒ Ğ±Ğ¾Ñ‚Ğ°',
                  pt: 'Convidar Bot',
                  es: 'Invitar Bot',
                  id: 'Undang Bot',
                  ar: 'Ù‚Ù… Ø¨Ø¯Ø¹ÙˆØ© Ø§Ù„Ø¨ÙˆØª'
                };
              %><%= step1Title[lang] || step1Title.de %></strong>
              <p><%
                const step1Desc = {
                  de: 'Klicke auf den Button oben und wÃ¤hle deinen Server aus',
                  en: 'Click the button above and select your server',
                  he: '×œ×—×¥ ×¢×œ ×”×›×¤×ª×•×¨ ×œ××¢×œ×” ×•×‘×—×¨ ××ª ×”×©×¨×ª ×©×œ×š',
                  ja: 'ä¸Šã®ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚µãƒ¼ãƒãƒ¼ã‚’é¸æŠ',
                  ru: 'ĞĞ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ²Ñ‹ÑˆĞµ Ğ¸ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ²Ğ¾Ğ¹ ÑĞµÑ€Ğ²ĞµÑ€',
                  pt: 'Clique no botÃ£o acima e selecione seu servidor',
                  es: 'Haz clic en el botÃ³n de arriba y selecciona tu servidor',
                  id: 'Klik tombol di atas dan pilih server Anda',
                  ar: 'Ø§Ù†Ù‚Ø± ÙÙˆÙ‚ Ø§Ù„Ø²Ø± Ø£Ø¹Ù„Ø§Ù‡ ÙˆØ­Ø¯Ø¯ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ'
                };
              %><%= step1Desc[lang] || step1Desc.de %></p>
            </div>
          </div>
          <div class="step-item">
            <div class="step-num">2</div>
            <div class="step-content">
              <strong><%
                const step2Title = {
                  de: 'Berechtigungen bestÃ¤tigen',
                  en: 'Confirm Permissions',
                  he: '××©×¨ ×”×¨×©××•×ª',
                  ja: 'æ¨©é™ã‚’ç¢ºèª',
                  ru: 'ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚ÑŒ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ',
                  pt: 'Confirmar PermissÃµes',
                  es: 'Confirmar Permisos',
                  id: 'Konfirmasi Izin',
                  ar: 'ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª'
                };
              %><%= step2Title[lang] || step2Title.de %></strong>
              <p><%
                const step2Desc = {
                  de: 'Der Bot benÃ¶tigt Administrator-Rechte fÃ¼r volle FunktionalitÃ¤t',
                  en: 'The bot needs administrator permissions for full functionality',
                  he: '×”×‘×•×˜ ×¦×¨×™×š ×”×¨×©××•×ª ×× ×”×œ ×œ×¤×•× ×§×¦×™×•× ×œ×™×•×ª ××œ××”',
                  ja: 'ãƒœãƒƒãƒˆã¯å®Œå…¨ãªæ©Ÿèƒ½ã®ãŸã‚ã«ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ã§ã™',
                  ru: 'Ğ‘Ğ¾Ñ‚Ñƒ Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ¿Ñ€Ğ°Ğ²Ğ° Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ° Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸',
                  pt: 'O bot precisa de permissÃµes de administrador para funcionalidade completa',
                  es: 'El bot necesita permisos de administrador para funcionalidad completa',
                  id: 'Bot memerlukan izin administrator untuk fungsionalitas penuh',
                  ar: 'ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ø¨ÙˆØª Ø¥Ù„Ù‰ Ø£Ø°ÙˆÙ†Ø§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ Ù„Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ÙƒØ§Ù…Ù„Ø©'
                };
              %><%= step2Desc[lang] || step2Desc.de %></p>
            </div>
          </div>
          <div class="step-item">
            <div class="step-num">3</div>
            <div class="step-content">
              <strong><%
                const step3Title = {
                  de: 'Seite neu laden',
                  en: 'Reload Page',
                  he: '×˜×¢×Ÿ ××—×“×© ××ª ×”×“×£',
                  ja: 'ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿',
                  ru: 'ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ',
                  pt: 'Recarregar PÃ¡gina',
                  es: 'Recargar PÃ¡gina',
                  id: 'Muat Ulang Halaman',
                  ar: 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©'
                };
              %><%= step3Title[lang] || step3Title.de %></strong>
              <p><%
                const step3Desc = {
                  de: 'Kehre zu dieser Seite zurÃ¼ck und dein Server wird erscheinen',
                  en: 'Return to this page and your server will appear',
                  he: '×—×–×•×¨ ×œ×“×£ ×–×” ×•×”×©×¨×ª ×©×œ×š ×™×•×¤×™×¢',
                  ja: 'ã“ã®ãƒšãƒ¼ã‚¸ã«æˆ»ã‚‹ã¨ã‚µãƒ¼ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™',
                  ru: 'Ğ’ĞµÑ€Ğ½Ğ¸Ñ‚ĞµÑÑŒ Ğ½Ğ° ÑÑ‚Ñƒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ¸ Ğ²Ğ°Ñˆ ÑĞµÑ€Ğ²ĞµÑ€ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ',
                  pt: 'Retorne a esta pÃ¡gina e seu servidor aparecerÃ¡',
                  es: 'Regresa a esta pÃ¡gina y tu servidor aparecerÃ¡',
                  id: 'Kembali ke halaman ini dan server Anda akan muncul',
                  ar: 'Ø§Ø±Ø¬Ø¹ Ø¥Ù„Ù‰ Ù‡Ø°Ù‡ Ø§Ù„ØµÙØ­Ø© ÙˆØ³ÙŠØ¸Ù‡Ø± Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ'
                };
              %><%= step3Desc[lang] || step3Desc.de %></p>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% } %>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <div class="loading-text">Lade Server...</div>
      <div class="loading-subtext">Bitte warten</div>
    </div>
  </div>

  <footer>
    <p>Quantix Tickets Â© 2025 Quantix Development â€¢ Alle Rechte vorbehalten â€¢ Version <%= version %></p>
  </footer>

  <script>
    // Auto-submit on card click
    document.querySelectorAll('.server-card').forEach(card => {
      card.addEventListener('click', (e) => {
        // Skip if this is a server without bot
        if (card.classList.contains('no-bot')) {
          e.preventDefault();
          const serverId = card.getAttribute('data-server-id');
          const clientId = '<%= clientId %>';
          const inviteUrl = `https://discord.com/oauth2/authorize?client_id=${clientId}&permissions=8&scope=bot%20applications.commands&guild_id=${serverId}&redirect_uri=https%3A%2F%2Ftickets.quantix-bot.de%2Fauth%2Fdiscord%2Fcallback`;
          window.location.href = inviteUrl;
          return;
        }

        document.querySelectorAll('.server-card').forEach(c => c.classList.remove('selected'));
        card.classList.add('selected');

        // Show loading overlay
        document.getElementById('loadingOverlay').classList.add('show');

        // Auto-submit form after selection
        setTimeout(() => {
          document.getElementById('serverForm').submit();
        }, 300);
      });
    });

    // Theme is managed by /js/theme-manager.js (Cookie-based)

    // Loading animation for Home button
    const homeLink = document.querySelector('a[href="/"]');
    if (homeLink) {
      homeLink.addEventListener('click', function(e) {
        e.preventDefault();
        const href = this.getAttribute('href');

        const loadingOverlay = document.getElementById('loadingOverlay');
        const loadingText = loadingOverlay.querySelector('.loading-text');
        const loadingSubtext = loadingOverlay.querySelector('.loading-subtext');

        const lang = '<%= lang || "de" %>';
        const texts = {
          de: { text: 'Zur Startseite...', subtext: 'Bitte warten' },
          en: { text: 'Going to home...', subtext: 'Please wait' },
          he: { text: '×—×–×¨×” ×œ×“×£ ×”×‘×™×ª...', subtext: '×× × ×”××ª×Ÿ' },
          ja: { text: 'ãƒ›ãƒ¼ãƒ ã«ç§»å‹•ä¸­...', subtext: 'ãŠå¾…ã¡ãã ã•ã„' },
          ru: { text: 'ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ½Ğ° Ğ³Ğ»Ğ°Ğ²Ğ½ÑƒÑ...', subtext: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ´Ğ¾Ğ¶Ğ´Ğ¸Ñ‚Ğµ' },
          pt: { text: 'Indo para inÃ­cio...', subtext: 'Por favor, aguarde' },
          es: { text: 'Yendo al inicio...', subtext: 'Por favor, espere' },
          id: { text: 'Ke beranda...', subtext: 'Mohon tunggu' },
          ar: { text: 'Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©...', subtext: 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±' }
        };

        const t = texts[lang] || texts.de;
        loadingText.textContent = t.text;
        loadingSubtext.textContent = t.subtext;
        loadingOverlay.classList.add('show');

        setTimeout(() => {
          window.location.href = href;
        }, 100);
      });
    }

    // Owner Dashboard Button Loading Animation
    const ownerDashboardBtn = document.getElementById('ownerDashboardBtn');
    if (ownerDashboardBtn) {
      ownerDashboardBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const href = this.getAttribute('href');
        this.classList.add('loading');
        setTimeout(() => {
          window.location.href = href;
        }, 300);
      });
    }

    // Founder Dashboard Button Loading Animation
    const founderDashboardBtn = document.getElementById('founderDashboardBtn');
    if (founderDashboardBtn) {
      founderDashboardBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const href = this.getAttribute('href');

        // Show loading overlay
        const loadingOverlay = document.getElementById('loadingOverlay');
        const loadingText = loadingOverlay.querySelector('.loading-text');
        const loadingSubtext = loadingOverlay.querySelector('.loading-subtext');

        // Founder Panel specific loading messages
        const messages = {
          de: { text: 'Lade Founder Panel...', subtext: 'Bereite erweiterte Verwaltung vor' },
          en: { text: 'Loading Founder Panel...', subtext: 'Preparing advanced management' },
          he: { text: '×˜×•×¢×Ÿ ×œ×•×— ××™×™×¡×“×™×...', subtext: '××›×™×Ÿ × ×™×”×•×œ ××ª×§×“×' },
          ja: { text: 'å‰µè¨­è€…ãƒ‘ãƒãƒ«ã‚’èª­ã¿è¾¼ã¿ä¸­...', subtext: 'é«˜åº¦ãªç®¡ç†ã‚’æº–å‚™ä¸­' },
          ru: { text: 'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¿Ğ°Ğ½ĞµĞ»Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ...', subtext: 'ĞŸĞ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²ĞºĞ° Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ¾Ğ³Ğ¾ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ' },
          pt: { text: 'Carregando Painel de Fundador...', subtext: 'Preparando gerenciamento avanÃ§ado' },
          es: { text: 'Cargando Panel de Fundador...', subtext: 'Preparando gestiÃ³n avanzada' },
          id: { text: 'Memuat Panel Pendiri...', subtext: 'Menyiapkan manajemen lanjutan' },
          zh: { text: 'æ­£åœ¨åŠ è½½åˆ›å§‹äººé¢æ¿...', subtext: 'å‡†å¤‡é«˜çº§ç®¡ç†' },
          ar: { text: 'ØªØ­Ù…ÙŠÙ„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø¤Ø³Ø³...', subtext: 'Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©' }
        };

        const lang = '<%= lang %>' || 'de';
        const message = messages[lang] || messages.de;

        if (loadingText) loadingText.textContent = message.text;
        if (loadingSubtext) loadingSubtext.textContent = message.subtext;
        if (loadingOverlay) loadingOverlay.classList.add('show');

        this.classList.add('loading');

        setTimeout(() => {
          window.location.href = href;
        }, 300);
      });
    }

    // Meine Tickets Button Loading Animation
    const myTicketsBtn = document.getElementById('myTicketsBtn');
    if (myTicketsBtn) {
      myTicketsBtn.addEventListener('click', function(e) {
        e.preventDefault();
        const href = this.getAttribute('href');

        // Show loading overlay
        const loadingOverlay = document.getElementById('loadingOverlay');
        const loadingText = loadingOverlay.querySelector('.loading-text');
        const loadingSubtext = loadingOverlay.querySelector('.loading-subtext');

        // My Tickets specific loading messages
        const messages = {
          de: { text: 'Lade deine Tickets...', subtext: 'Bitte warten' },
          en: { text: 'Loading your tickets...', subtext: 'Please wait' },
          he: { text: '×˜×•×¢×Ÿ ××ª ×”×›×¨×˜×™×¡×™× ×©×œ×š...', subtext: '×× × ×”××ª×Ÿ' },
          ja: { text: 'ãƒã‚±ãƒƒãƒˆã‚’èª­ã¿è¾¼ã¿ä¸­...', subtext: 'ãŠå¾…ã¡ãã ã•ã„' },
          ru: { text: 'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ²Ğ°ÑˆĞ¸Ñ… Ñ‚Ğ¸ĞºĞµÑ‚Ğ¾Ğ²...', subtext: 'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ´Ğ¾Ğ¶Ğ´Ğ¸Ñ‚Ğµ' },
          pt: { text: 'Carregando seus tickets...', subtext: 'Por favor, aguarde' },
          es: { text: 'Cargando tus tickets...', subtext: 'Por favor, espere' },
          id: { text: 'Memuat tiket Anda...', subtext: 'Mohon tunggu' },
          zh: { text: 'æ­£åœ¨åŠ è½½æ‚¨çš„å·¥å•...', subtext: 'è¯·ç¨å€™' },
          ar: { text: 'ØªØ­Ù…ÙŠÙ„ ØªØ°Ø§ÙƒØ±Ùƒ...', subtext: 'ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±' }
        };

        const lang = '<%= lang %>' || 'de';
        const message = messages[lang] || messages.de;

        if (loadingText) loadingText.textContent = message.text;
        if (loadingSubtext) loadingSubtext.textContent = message.subtext;
        if (loadingOverlay) loadingOverlay.classList.add('show');

        setTimeout(() => {
          window.location.href = href;
        }, 300);
      });
    }

    // Global Click Counter Management (User-wide)
    let clickCount = 0;

    async function loadClickCount() {
      try {
        const response = await fetch('/api/settings-clicks');
        const data = await response.json();
        clickCount = data.count || 0;
        updateClickDisplay();
      } catch (err) {
        console.error('Error loading click count:', err);
        clickCount = 0;
        updateClickDisplay();
      }
    }

    async function incrementClickCount() {
      try {
        const response = await fetch('/api/settings-clicks/increment', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          }
        });
        const data = await response.json();
        clickCount = data.count || 0;
        updateClickDisplay();

        // Animate counter
        const counter = document.getElementById('clickCount');
        if (counter) {
          counter.classList.add('animate');
          setTimeout(() => counter.classList.remove('animate'), 500);
        }
      } catch (err) {
        console.error('Error incrementing click count:', err);
      }
    }

    function updateClickDisplay() {
      const counter = document.getElementById('clickCount');
      if (counter) {
        counter.textContent = clickCount;

        // Change color based on count
        if (clickCount >= 100) {
          counter.style.background = 'linear-gradient(135deg, #8e44ad 0%, #9b59b6 100%)';
          counter.style.color = '#fff';
          counter.style.fontSize = '0.55rem'; // Smaller for 3 digits
        } else if (clickCount >= 50) {
          counter.style.background = 'linear-gradient(135deg, #e74c3c 0%, #c0392b 100%)';
          counter.style.color = '#fff';
        } else if (clickCount >= 20) {
          counter.style.background = 'linear-gradient(135deg, #e67e22 0%, #d35400 100%)';
          counter.style.color = '#fff';
        } else if (clickCount >= 10) {
          counter.style.background = 'linear-gradient(135deg, #3498db 0%, #2980b9 100%)';
          counter.style.color = '#fff';
        } else if (clickCount >= 5) {
          counter.style.background = 'linear-gradient(135deg, #2ecc71 0%, #27ae60 100%)';
          counter.style.color = '#fff';
        }
      }
    }

    // Spin Toggle Funktion (mit sessionStorage und Click Counter)
    function toggleSpin() {
      const body = document.body;
      const settingsBtn = document.getElementById('settingsBtn');
      const isSpinning = body.classList.contains('spinning');

      // Increment click counter
      incrementClickCount();

      if (isSpinning) {
        body.classList.remove('spinning');
        settingsBtn.classList.remove('active');
        sessionStorage.setItem('quantix-spin-enabled', 'false');
      } else {
        body.classList.add('spinning');
        settingsBtn.classList.add('active');
        sessionStorage.setItem('quantix-spin-enabled', 'true');
      }
    }

    // Spin-Zustand beim Laden wiederherstellen
    (function() {
      loadClickCount(); // Load click counter first

      const spinEnabled = sessionStorage.getItem('quantix-spin-enabled');
      if (spinEnabled === 'true') {
        document.body.classList.add('spinning');
        document.getElementById('settingsBtn').classList.add('active');
      }
    })();

    // Accelerating Spinner Animation (No Maximum)
    (function() {
      let secondsElapsed = 0;

      function accelerateSpinners() {
        const spinners = document.querySelectorAll('.loading-spinner, .owner-dashboard-btn.loading i, .founder-dashboard-btn.loading i');

        if (spinners.length === 0) return;

        secondsElapsed++;

        // Calculate new duration: 1 / (1 + 0.1 * seconds)
        // This increases speed by 0.1 rotations per second each second
        const rotationsPerSecond = 1 + (0.1 * secondsElapsed);
        const newDuration = 1 / rotationsPerSecond;

        spinners.forEach(spinner => {
          spinner.style.animationDuration = `${newDuration}s`;
        });
      }

      // Run every second
      setInterval(accelerateSpinners, 1000);
    })();

    // DVD Logo Bounce Animation for ALL Elements
    (function() {
      const colors = [
        '#00ff88', '#ff0088', '#ffff00', '#00ffff',
        '#ff8800', '#8800ff', '#00ff00', '#ff0000'
      ];

      let bouncingElements = [];
      let animationId = null;
      let speedChangeInterval = null;

      // Factory function to create bouncing element
      function createBouncingElement(element, speedX, speedY) {
        if (!element) return null;

        const rect = element.getBoundingClientRect();
        const computedStyle = window.getComputedStyle(element);

        return {
          element: element,
          x: rect.left,
          y: rect.top,
          dx: speedX,
          dy: speedY,
          accelerationX: 0.001 + Math.random() * 0.003,
          accelerationY: 0.001 + Math.random() * 0.003,
          scale: 1.0,
          scaleDirection: Math.random() > 0.5 ? 0.01 : -0.01,
          minScale: 0.5,
          maxScale: 2.0,
          colorIndex: Math.floor(Math.random() * colors.length),
          originalStyles: {
            position: computedStyle.position,
            top: computedStyle.top,
            left: computedStyle.left,
            right: computedStyle.right,
            bottom: computedStyle.bottom,
            background: computedStyle.background,
            backgroundColor: computedStyle.backgroundColor,
            transform: computedStyle.transform,
            margin: computedStyle.margin,
            zIndex: computedStyle.zIndex
          }
        };
      }

      function startDVDBounce() {
        if (animationId) return; // Already running

        bouncingElements = [];

        // Collect all elements to bounce
        const settingsBtn = document.getElementById('settingsBtn');
        const themeToggle = document.querySelector('.theme-toggle');
        const serverCards = document.querySelectorAll('.server-card');
        const navButtons = document.querySelectorAll('.nav-buttons a');
        const title = document.querySelector('h1');
        const subtitle = document.querySelector('.sub');
        const footer = document.querySelector('footer');

        // Add settings button
        if (settingsBtn) {
          const bouncer = createBouncingElement(settingsBtn, 2, 2);
          if (bouncer) {
            bouncer.element.style.position = 'fixed';
            bouncer.element.style.zIndex = '10000';
            bouncingElements.push(bouncer);
          }
        }

        // Add theme toggle
        if (themeToggle) {
          const bouncer = createBouncingElement(themeToggle, 2.5, 1.8);
          if (bouncer) {
            bouncer.element.style.position = 'fixed';
            bouncer.element.style.zIndex = '10000';
            bouncingElements.push(bouncer);
          }
        }

        // Add server cards with varying speeds
        serverCards.forEach((card, index) => {
          const speedX = 1.5 + (index * 0.3);
          const speedY = 1.3 + (index * 0.25);
          const bouncer = createBouncingElement(card, speedX, speedY);
          if (bouncer) {
            bouncer.element.style.position = 'fixed';
            bouncer.element.style.zIndex = '9000';
            bouncingElements.push(bouncer);
          }
        });

        // Add navigation buttons with varying speeds
        navButtons.forEach((btn, index) => {
          const speedX = 2.2 + (index * 0.4);
          const speedY = 1.9 + (index * 0.35);
          const bouncer = createBouncingElement(btn, speedX, speedY);
          if (bouncer) {
            bouncer.element.style.position = 'fixed';
            bouncer.element.style.zIndex = '9500';
            bouncingElements.push(bouncer);
          }
        });

        // Add title
        if (title) {
          const bouncer = createBouncingElement(title, 1.8, 2.2);
          if (bouncer) {
            bouncer.element.style.position = 'fixed';
            bouncer.element.style.zIndex = '9200';
            bouncingElements.push(bouncer);
          }
        }

        // Add subtitle
        if (subtitle) {
          const bouncer = createBouncingElement(subtitle, 2.3, 1.6);
          if (bouncer) {
            bouncer.element.style.position = 'fixed';
            bouncer.element.style.zIndex = '9200';
            bouncingElements.push(bouncer);
          }
        }

        // Add footer
        if (footer) {
          const bouncer = createBouncingElement(footer, 1.6, 2.4);
          if (bouncer) {
            bouncer.element.style.position = 'fixed';
            bouncer.element.style.zIndex = '9100';
            bouncingElements.push(bouncer);
          }
        }

        // Animation loop for all elements
        function animate() {
          bouncingElements.forEach(bouncer => {
            const width = bouncer.element.offsetWidth * bouncer.scale;
            const height = bouncer.element.offsetHeight * bouncer.scale;
            const maxX = window.innerWidth - width;
            const maxY = window.innerHeight - height;

            // Apply acceleration to velocity (unlimited speed increase)
            bouncer.dx += bouncer.dx > 0 ? bouncer.accelerationX : -bouncer.accelerationX;
            bouncer.dy += bouncer.dy > 0 ? bouncer.accelerationY : -bouncer.accelerationY;

            // Update position
            bouncer.x += bouncer.dx;
            bouncer.y += bouncer.dy;

            // Update scale
            bouncer.scale += bouncer.scaleDirection;

            // Bounce scale between min and max
            if (bouncer.scale <= bouncer.minScale || bouncer.scale >= bouncer.maxScale) {
              bouncer.scaleDirection = -bouncer.scaleDirection;
              bouncer.scale = bouncer.scale <= bouncer.minScale ? bouncer.minScale : bouncer.maxScale;
            }

            // Bounce off edges and change color
            if (bouncer.x <= 0 || bouncer.x >= maxX) {
              bouncer.dx = -bouncer.dx;
              bouncer.x = bouncer.x <= 0 ? 0 : maxX;
              bouncer.colorIndex = (bouncer.colorIndex + 1) % colors.length;
              bouncer.element.style.background = colors[bouncer.colorIndex];
            }

            if (bouncer.y <= 0 || bouncer.y >= maxY) {
              bouncer.dy = -bouncer.dy;
              bouncer.y = bouncer.y <= 0 ? 0 : maxY;
              bouncer.colorIndex = (bouncer.colorIndex + 1) % colors.length;
              bouncer.element.style.background = colors[bouncer.colorIndex];
            }

            // Apply new position and scale
            bouncer.element.style.left = bouncer.x + 'px';
            bouncer.element.style.top = bouncer.y + 'px';
            bouncer.element.style.transform = `scale(${bouncer.scale})`;
          });

          animationId = requestAnimationFrame(animate);
        }

        animate();

        // Random speed change every 10 seconds
        speedChangeInterval = setInterval(() => {
          bouncingElements.forEach(bouncer => {
            // Random new speed between -5 and 5
            const randomSpeedX = (Math.random() * 10) - 5;
            const randomSpeedY = (Math.random() * 10) - 5;

            // Ensure minimum speed
            bouncer.dx = randomSpeedX === 0 ? 1 : randomSpeedX;
            bouncer.dy = randomSpeedY === 0 ? 1 : randomSpeedY;
          });
        }, 10000);
      }

      function stopDVDBounce() {
        if (animationId) {
          cancelAnimationFrame(animationId);
          animationId = null;
        }

        if (speedChangeInterval) {
          clearInterval(speedChangeInterval);
          speedChangeInterval = null;
        }

        // Reset all elements to original styles
        bouncingElements.forEach(bouncer => {
          const elem = bouncer.element;
          const orig = bouncer.originalStyles;

          elem.style.position = orig.position;
          elem.style.top = orig.top;
          elem.style.left = orig.left;
          elem.style.right = orig.right;
          elem.style.bottom = orig.bottom;
          elem.style.background = orig.background;
          elem.style.backgroundColor = orig.backgroundColor;
          elem.style.transform = orig.transform;
          elem.style.margin = orig.margin;
          elem.style.zIndex = orig.zIndex;
        });

        bouncingElements = [];
      }

      // Override toggleSpin to include DVD bounce
      const originalToggleSpin = window.toggleSpin;
      window.toggleSpin = function() {
        originalToggleSpin();

        const isSpinning = document.body.classList.contains('spinning');
        if (isSpinning) {
          startDVDBounce();
        } else {
          stopDVDBounce();
        }
      };

      // Check if spinning is already active on page load
      const spinEnabled = sessionStorage.getItem('quantix-spin-enabled');
      if (spinEnabled === 'true') {
        setTimeout(startDVDBounce, 100);
      }
    })();
  </script>
</body>
</html>
